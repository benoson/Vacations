(this.webpackJsonpvacations=this.webpackJsonpvacations||[]).push([[0],{113:function(e,a,t){},132:function(e,a,t){e.exports=t.p+"static/media/settingsImg.4766456e.png"},133:function(e,a,t){e.exports=t.p+"static/media/deleteSVG.4eb942cd.svg"},134:function(e,a,t){e.exports=t.p+"static/media/spinningEarthSVG.7f4d39c2.svg"},143:function(e,a,t){e.exports=t(303)},148:function(e,a,t){},166:function(e,a,t){},168:function(e,a,t){},173:function(e,a,t){},268:function(e,a,t){},295:function(e,a){},298:function(e,a,t){},299:function(e,a,t){},300:function(e,a,t){},301:function(e,a,t){e.exports=t.p+"static/media/bannerBackground4.df0602a9.png"},302:function(e,a,t){},303:function(e,a,t){"use strict";t.r(a);var n,r=t(0),o=t.n(r),i=t(11),c=t.n(i),s=(t(148),t(20)),l=t(8),d=t(4),u=t.n(d),m=t(10),p=t(15),v=t(21),f=t(23),h=t(22),V=t(59),g=t.n(V),y=function e(a,t){Object(p.a)(this,e),this.userName=a,this.password=t},N=t(9),E=t.n(N),I=(t(166),t(129)),b=t(86),S=t(137);!function(e){e[e.GetAllVacations=0]="GetAllVacations",e[e.GetFavoriteVacations=1]="GetFavoriteVacations",e[e.SetFollowedVacation=2]="SetFollowedVacation",e[e.UnfollowVacation=3]="UnfollowVacation",e[e.AddVacation=4]="AddVacation",e[e.UpdateVacation=5]="UpdateVacation",e[e.UpdateFavoriteVacation=6]="UpdateFavoriteVacation",e[e.DeleteVacationViaSocketIO=7]="DeleteVacationViaSocketIO",e[e.DeleteFavoriteVacationViaSocketIO=8]="DeleteFavoriteVacationViaSocketIO",e[e.IncreaseVacationFollowersCount=9]="IncreaseVacationFollowersCount",e[e.IncreaseFavoriteVacationFollowersCount=10]="IncreaseFavoriteVacationFollowersCount",e[e.DecreaseVacationFollowersCount=11]="DecreaseVacationFollowersCount",e[e.DecreaseFavoriteVacationFollowersCount=12]="DecreaseFavoriteVacationFollowersCount",e[e.DeleteVacation=13]="DeleteVacation",e[e.updateUserName=14]="updateUserName",e[e.OnUserLogout=15]="OnUserLogout"}(n||(n={}));var w=Object(I.a)((function(e,a){var t=Object(S.a)({},e);switch(a.type){case n.GetAllVacations:t.allVacations=Object(b.a)(a.payload);break;case n.SetFollowedVacation:t.favoriteVacations.push(a.payload);break;case n.GetFavoriteVacations:t.favoriteVacations=Object(b.a)(a.payload);break;case n.UnfollowVacation:t.favoriteVacations.splice(a.payload,1);break;case n.AddVacation:t.allVacations.push(a.payload);break;case n.UpdateVacation:t.allVacations[a.payload.indexOfClickedVacationInGlobalStore]=a.payload.convertedValidDataForUIDisplay;break;case n.UpdateFavoriteVacation:t.favoriteVacations[a.payload.indexOfClickedFavoriteVacationInGlobalStore]=a.payload.convertedValidDataForUIDisplay;break;case n.DeleteVacationViaSocketIO:t.allVacations.splice(a.payload,1);break;case n.DeleteFavoriteVacationViaSocketIO:t.favoriteVacations.splice(a.payload,1);break;case n.IncreaseVacationFollowersCount:t.allVacations[a.payload.indexOfClickedVacationInGlobalStore].followersCount=a.payload.newFollowersCount;break;case n.IncreaseFavoriteVacationFollowersCount:t.favoriteVacations[a.payload.indexOfFavoriteClickedVacationInGlobalStore].followersCount=a.payload.newFollowersCount;break;case n.DecreaseVacationFollowersCount:t.allVacations[a.payload.indexOfClickedVacationInGlobalStore].followersCount=a.payload.newFollowersCount;break;case n.DecreaseFavoriteVacationFollowersCount:t.favoriteVacations[a.payload.indexOfFavoriteClickedVacationInGlobalStore].followersCount=a.payload.newFollowersCount;break;case n.DeleteVacation:t.allVacations.splice(a.payload,1);break;case n.OnUserLogout:t.favoriteVacations=new Array}return t}),new function e(){Object(p.a)(this,e),this.allVacations=new Array,this.favoriteVacations=new Array,this.userName=""});t(168);function k(){return o.a.createElement("div",{className:"topBanner"})}var F=function(e){!function(e){var a="Bearer "+e;E.a.defaults.headers.common.Authorization=a}(e.token);var a=JSON.stringify(e);sessionStorage.setItem("userInfo",a),w.dispatch({type:n.updateUserName,payload:e.userName})},D=function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=a.call(this,e)).usernameInputField=void 0,r.passwordInputField=void 0,r.userMessagesParagraph=void 0,r.componentDidMount=function(){r.checkIfGlobalStoreHasAllVacations(),r.usernameInputField=document.querySelector("#usernameFieldset"),r.passwordInputField=document.querySelector("#passwordFieldset"),r.userMessagesParagraph=document.querySelector("#userMessagesParagraph")},r.getAllVacationsFromServer=Object(m.a)(u.a.mark((function e(){var a,t,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("http://34.65.28.6:3001/vacations");case 3:a=e.sent,t=a.data,w.dispatch({type:n.GetAllVacations,payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);try{o=e.t0.response.data.error,r.loginErrorHandler(o)}catch(i){r.loginErrorHandler(e.t0)}case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),r.login=Object(m.a)(u.a.mark((function e(){var a,t,n,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.resetInputFields(),a=r.checkIfUsernameEnteredIsEmpty(),t=r.checkIfPasswordEnteredIsEmpty(),!a||!t){e.next=19;break}return e.prev=4,r.disableLoginButton(),n=new y(r.state.userName,r.state.password),e.next=9,E.a.post("http://34.65.28.6:3001/users/login",n);case 9:o=e.sent,i=o.data,F(i),r.enableLoginBtn(),r.routingHandler(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4);try{c=e.t0.response.data.error,r.loginErrorHandler(c)}catch(s){r.loginErrorHandler(e.t0)}finally{r.enableLoginBtn()}case 19:case"end":return e.stop()}}),e,null,[[4,16]])}))),r.checkIfGlobalStoreHasAllVacations=function(){0===w.getState().allVacations.length&&r.getAllVacationsFromServer()},r.updateUserNameValue=function(e){var a=e.target.value.trim();r.setState({userName:a})},r.updatePasswordValue=function(e){var a=e.target.value;r.setState({password:a})},r.checkIfUsernameEnteredIsEmpty=function(){return""!==document.querySelector("#usernameField").value.trim()||(r.notifyUserAboutInvalidUserName(),!1)},r.checkIfPasswordEnteredIsEmpty=function(){return""!==document.querySelector("#passwordField").value.trim()||(r.notifyUserAboutInvalidPassword(),!1)},r.routingHandler=function(){r.props.history.push("/vacations")},r.disableLoginButton=function(){var e=document.querySelector("#loginBtn");e.disabled=!0,e.style.cursor="not-allowed"},r.enableLoginBtn=function(){var e=document.querySelector("#loginBtn");e.disabled=!1,e.style.cursor="pointer"},r.notifyUserAboutInvalidUserName=function(){r.usernameInputField.style.border="2px solid red"},r.notifyUserAboutInvalidPassword=function(){r.passwordInputField.style.border="2px solid red"},r.resetInputFields=function(){r.usernameInputField.style.border="1px solid #00d1ff",r.passwordInputField.style.border="1px solid #00d1ff",r.userMessagesParagraph.textContent=""},r.loginErrorHandler=function(e){r.userMessagesParagraph.textContent=e},r.state={userName:"",password:""},r}return Object(v.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"loginSectionContainer"},o.a.createElement(k,null),o.a.createElement("div",{className:"loginSection"},o.a.createElement("div",{className:"loginSquare"},o.a.createElement("img",{className:"login-logo",src:g.a,alt:"Explorer"}),o.a.createElement("h2",{className:"sharp-text"},"Login"),o.a.createElement("h3",{className:"sharp-text margin-bottom-2"},"To Continue To Explorer"),o.a.createElement("div",{className:"inputFieldSection"},o.a.createElement("fieldset",{id:"usernameFieldset",className:"cerdinals-fieldset"},o.a.createElement("legend",null,"Username"),o.a.createElement("input",{onChange:this.updateUserNameValue,type:"text",name:"username",id:"usernameField"})),o.a.createElement("fieldset",{id:"passwordFieldset",className:"cerdinals-fieldset"},o.a.createElement("legend",null,"Password"),o.a.createElement("input",{onChange:this.updatePasswordValue,type:"password",name:"password",id:"passwordField"})),o.a.createElement("button",{className:"loginBtn",id:"loginBtn",onClick:this.login},"Login")),o.a.createElement(s.b,{className:"notRegisteredLink sharp-text",to:"/register"},"I Don't Have An Account")),o.a.createElement("p",{id:"userMessagesParagraph",className:"userMessagesParagraph sharp-text"})))}}]),t}(r.Component),C=function e(a,t,n,r){Object(p.a)(this,e),this.firstName=a,this.lastName=t,this.userName=n,this.password=r},x=(t(173),function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).firstNameInputFieldset=void 0,n.lastNameInputFieldset=void 0,n.usernameInputFieldset=void 0,n.passwordInputFieldset=void 0,n.userMessagesParagraph=void 0,n.componentDidMount=function(){n.firstNameInputFieldset=document.querySelector("#firstNameFieldset"),n.lastNameInputFieldset=document.querySelector("#lastNameFieldset"),n.usernameInputFieldset=document.querySelector("#usernameFieldset"),n.passwordInputFieldset=document.querySelector("#passwordFieldset"),n.userMessagesParagraph=document.querySelector("#userMessagesParagraph")},n.onUserRegisterClick=Object(m.a)(u.a.mark((function e(){var a,t,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.resetInputFields(),!n.checkIfRegistrationDataIsValid()){e.next=18;break}return e.prev=3,n.disableRegisterButton(),a=new C(n.state.firstName,n.state.lastName,n.state.userName,n.state.password),e.next=8,E.a.post("http://34.65.28.6:3001/users/register",a);case 8:t=e.sent,r=t.data,F(r),n.enableRegisterBtn(),n.routingHandler(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3);try{o=e.t0.response.data.error,n.registerErrorHandler(o)}catch(i){n.registerErrorHandler(e.t0)}finally{n.enableRegisterBtn()}case 18:case"end":return e.stop()}}),e,null,[[3,15]])}))),n.checkIfRegistrationDataIsValid=function(){var e=n.checkIfFirstNameIsValid(),a=n.checkIfLastNameIsValid(),t=n.checkIfPasswordIsValid(),r=n.checkIfUserNameIsValid();return!!(e&&a&&r&&t)},n.updateFirstNameValue=function(e){var a=e.target.value.trim();n.setState({firstName:a})},n.updateLastNameValue=function(e){var a=e.target.value.trim();n.setState({lastName:a})},n.updateUserNameValue=function(e){var a=e.target.value.trim();n.setState({userName:a})},n.updatePasswordValue=function(e){var a=e.target.value.trim();n.setState({password:a})},n.checkIfFirstNameIsValid=function(){var e=n.state.firstName.trim(),a=n.firstNameInputFieldset;if(""!==e){if(e.length<=25)return!0;n.registerErrorHandler("First Name Must Not Be More Than 25 characters")}return n.notifyUserInputFieldIsNotValid(a),!1},n.checkIfLastNameIsValid=function(){var e=n.state.lastName.trim(),a=n.lastNameInputFieldset;if(""!==e){if(e.length<=25)return!0;n.registerErrorHandler("Last Name Must Not Be More Than 25 characters")}return n.notifyUserInputFieldIsNotValid(a),!1},n.checkIfPasswordIsValid=function(){var e=n.state.password.trim(),a=n.passwordInputFieldset;if(""!==e){if(e.length>=6){if(e.length<=15)return!0;n.registerErrorHandler("The Password Must Be a Maximum of 15 Characters")}else n.registerErrorHandler("Password Must Be At Least 6 Characters Long");return n.notifyUserInputFieldIsNotValid(a),!1}return n.notifyUserInputFieldIsNotValid(a),!1},n.checkIfUserNameIsValid=function(){var e=n.state.userName.trim(),a=n.usernameInputFieldset;if(""!==e)if(e.length>=3){if(e.length<=15)return!0;n.registerErrorHandler("Username Must Be a Maximum of 15 Characters")}else n.registerErrorHandler("Username Must Be At Least 3 Characters Long");return n.notifyUserInputFieldIsNotValid(a),!1},n.routingHandler=function(){n.props.history.push("/vacations")},n.disableRegisterButton=function(){var e=document.querySelector("#registerBtn");e.disabled=!0,e.style.cursor="not-allowed"},n.enableRegisterBtn=function(){var e=document.querySelector("#registerBtn");e.disabled=!1,e.style.cursor="pointer"},n.notifyUserInputFieldIsNotValid=function(e){e.style.border="2px solid red"},n.registerErrorHandler=function(e){n.userMessagesParagraph.textContent=e},n.resetInputFields=function(){n.usernameInputFieldset.style.border="1px solid #00d1ff",n.passwordInputFieldset.style.border="1px solid #00d1ff",n.firstNameInputFieldset.style.border="1px solid #00d1ff",n.lastNameInputFieldset.style.border="1px solid #00d1ff",n.userMessagesParagraph.textContent=""},n.state={firstName:"",lastName:"",userName:"",password:""},n}return Object(v.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"registerSectionContainer"},o.a.createElement(k,null),o.a.createElement("div",{className:"registerSection"},o.a.createElement("div",{className:"registerSquare"},o.a.createElement("img",{className:"register-logo",src:g.a,alt:"Explorer"}),o.a.createElement("h2",{className:"sharp-text"},"Register"),o.a.createElement("h3",{className:"sharp-text margin-bottom-2"},"To Explorer"),o.a.createElement("div",{className:"inputFieldSection"},o.a.createElement("fieldset",{id:"firstNameFieldset",className:"cerdinals-fieldset firstNameFieldset"},o.a.createElement("legend",null,"First Name"),o.a.createElement("input",{onChange:this.updateFirstNameValue,type:"text",name:"firstName",id:"firstNameField"})),o.a.createElement("fieldset",{id:"lastNameFieldset",className:"cerdinals-fieldset lastNameFieldset"},o.a.createElement("legend",null,"Last Name"),o.a.createElement("input",{onChange:this.updateLastNameValue,type:"text",name:"lastName",id:"lastNameField"})),o.a.createElement("fieldset",{id:"usernameFieldset",className:"cerdinals-fieldset usernameFieldset"},o.a.createElement("legend",null,"Username"),o.a.createElement("input",{onChange:this.updateUserNameValue,type:"text",name:"username",id:"usernameField"})),o.a.createElement("fieldset",{id:"passwordFieldset",className:"cerdinals-fieldset passwordFieldset"},o.a.createElement("legend",null,"Password"),o.a.createElement("input",{onChange:this.updatePasswordValue,type:"password",name:"password",id:"passwordField"})),o.a.createElement("button",{id:"registerBtn",className:"registerBtn",onClick:this.onUserRegisterClick},"Register")),o.a.createElement(s.b,{className:"alreadyRegisteredLink sharp-text",to:"/login"},"I Already Have An Account")),o.a.createElement("p",{id:"userMessagesParagraph",className:"userMessagesParagraph sharp-text"})))}}]),t}(r.Component)),O=t(131),U=function(){var e=JSON.parse(sessionStorage.getItem("userInfo"));if(null!==e&&void 0!==e.token){var a="Bearer "+e.token;E.a.defaults.headers.common.Authorization=a}},A=function(){var e=Object(m.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("http://34.65.28.6:3001/users/info");case 3:return a=e.sent,t=a.data,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),B=t(84),M=t.n(B),H=(t(268),function(){var e=JSON.parse(sessionStorage.getItem("userInfo"));return null!==e&&void 0!==e.token});t(113);function q(){var e=Object(l.g)(),a=function(){var a=Object(m.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!H()){a.next=12;break}return a.prev=2,a.next=5,E.a.post("http://34.65.28.6:3001/users/logout");case 5:a.next=9;break;case 7:a.prev=7,a.t0=a.catch(2);case 9:return a.prev=9,w.dispatch({type:n.OnUserLogout}),a.finish(9);case 12:sessionStorage.clear(),e.push("/login");case 14:case"end":return a.stop()}}),a,null,[[2,7,9,12]])})));return function(){return a.apply(this,arguments)}}();return window.onscroll=function(){try{var e=document.querySelector("#topNavbar"),a=document.querySelector("#logStatusBtn");document.body.scrollTop>130||document.documentElement.scrollTop>130?(e.style.backgroundColor="#174d5f",e.style.color="white",a.style.color="white"):(document.body.scrollTop<=130||document.documentElement.scrollTop<=130)&&(e.style.backgroundColor="transparent",e.style.color="#15304c",a.style.color="blue")}catch(t){}},o.a.createElement("div",{id:"topNavbar",className:"topNavbar"},H()?o.a.createElement("div",{className:"helloUserSection"},JSON.parse(sessionStorage.getItem("userInfo")).userName,o.a.createElement("span",{id:"logStatusBtn",onClick:a,className:"topNavItem loginStatusButton"},"Logout")):o.a.createElement("div",{className:"helloUserSection"},o.a.createElement("span",{id:"loginStatusBtn",onClick:a,className:"topNavItem loginStatusButton"},"Login")))}var L=function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).userTypeFromServerCache=void 0,n.componentDidMount=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(),e.next=3,A();case 3:a=e.sent,n.userTypeFromServerCache=a.userType,"ADMIN"===n.userTypeFromServerCache&&n.getAllFollowedVacationsFromServer();case 6:case"end":return e.stop()}}),e)}))),n.getAllFollowedVacationsFromServer=Object(m.a)(u.a.mark((function e(){var a,t,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(),e.prev=1,e.next=4,E.a.get("http://34.65.28.6:3001/vacations/all_followed_vacations");case 4:a=e.sent,t=a.data,r=n.extractFollowedVacationsNames(t),o=n.extractFollowedVacationsFollowersCount(t),n.setState({followedVacationsNames:r,followedVacationsFollowersCount:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);try{i=e.t0.response.data.error,n.reportsPageErrorHandler(i)}catch(c){n.reportsPageErrorHandler(e.t0)}case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),n.extractFollowedVacationsNames=function(e){var a=new Array;return e.map((function(e){return a.push(e.vacationName)})),a},n.extractFollowedVacationsFollowersCount=function(e){var a=new Array;return e.map((function(e){return a.push(e.followersCount)})),a},n.reportsPageErrorHandler=function(e){var a=document.querySelector("#snackbar");a.className="show",a.textContent=e,setTimeout((function(){a.className=a.className.replace("show","")}),6e3)},n.getRandomChartColor=function(){for(var e="0123456789ABCDEF".split(""),a="#",t=0;t<6;t++)a+=e[Math.floor(16*Math.random())];return a},n.state={followedVacationsNames:new Array,followedVacationsFollowersCount:new Array},n}return Object(v.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"reportsPageContainer"},o.a.createElement(q,null),o.a.createElement("div",{className:"reportsPage"},o.a.createElement(s.b,{to:"/vacations",className:"backHomeBtn"},"Back Home"),"ADMIN"===this.userTypeFromServerCache?this.state.followedVacationsNames.length>0?o.a.createElement("div",{className:"graphSection"},o.a.createElement("h1",{className:"sharp-text likedUsersVacationsHeader"},"Liked Users Vacations"),o.a.createElement("div",{className:"doughnut"},o.a.createElement(O.Doughnut,{data:{labels:this.state.followedVacationsNames,datasets:[{label:"Likes",backgroundColor:this.state.followedVacationsNames.map((function(){return e.getRandomChartColor()})),borderColor:"white",borderWidth:2,data:this.state.followedVacationsFollowersCount}]},options:{legend:{display:!0,position:"right"},maintainAspectRatio:!0}}))):o.a.createElement("div",null,o.a.createElement("h1",{className:"sharp-text"},"Oops... There are no liked vacations yet"),o.a.createElement("img",{className:"noAuthImg",src:M.a,alt:"No Authorization"})):o.a.createElement("div",{className:"noAuthSection"},o.a.createElement("h1",{className:"sharp-text"},"Oops... You are not authorized to view that page"),o.a.createElement("img",{className:"noAuthImg",src:M.a,alt:"No Authorization"})),o.a.createElement("div",{id:"snackbar"})))}}]),t}(r.Component),T=t(38),P=t(85),j=t(132),G=t.n(j),R=t(133),W=t.n(R),J=t(134),Y=t.n(J),_=t(335),z=t(135),$=t.n(z),K=t(136),Q=t.n(K);function X(e){return o.a.createElement("div",{className:"vacationCardContainer"},o.a.createElement("div",{className:"topSection"},o.a.createElement("div",{className:"imgSection"},o.a.createElement("img",{className:"vacationCardImg",src:e.vacation.imageURL,alt:e.vacation.vacationName})),o.a.createElement("div",{className:"vacationInfoCard"},o.a.createElement("h4",{className:"resortName"},e.vacation.vacationName),o.a.createElement("div",{className:"vacationDates"},o.a.createElement("h4",{className:"vacationDate"},e.vacation.startDate),o.a.createElement("span",null," - "),o.a.createElement("h4",{className:"vacationDate"},e.vacation.endDate)),o.a.createElement("h4",{className:"vacationPrice"},e.vacation.vacationPrice," $")),o.a.createElement("div",{className:"vacationDesc"},e.vacation.vacationDescription)),o.a.createElement("div",{className:"bottomSection"},"ADMIN"===e.userTypeFromServerCache?o.a.createElement("div",{className:"adminControlPanel"},o.a.createElement(_.a,{onClick:function(a){e.onVacationDeleteAttempt(e.vacation,a)}},o.a.createElement($.a,null)),o.a.createElement(_.a,{onClick:function(a){e.onVacationEditAttempt(e.vacation,a)}},o.a.createElement(Q.a,null))):o.a.createElement("div",null,o.a.createElement("div",{className:"vacationLikeCardSection"},e.validateVacationIsNotLikedByTheUser(e.vacation)?o.a.createElement("button",{className:"emptyHeart likeBtn",onClick:function(){return e.onVacationFollowAttempt(e.vacation)}}):o.a.createElement("button",{className:"fullHeart likeBtn",onClick:function(){return e.onVacationFollowAttempt(e.vacation)}})),o.a.createElement("p",{className:"followersText"},e.vacation.followersCount))))}var Z=t(334),ee=t(63),ae=t.n(ee),te=(t(298),function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=a.call(this,e)).unSubscribeStore=void 0,r.userTypeFromServerCache=void 0,r.userNameFromServerCache=void 0,r.imageToDeleteFromServer=void 0,r.socket=void 0,r.componentWillUnmount=function(){r.unSubscribeStore();try{r.socket.disconnect()}catch(e){r.vacationsErrorHandler("Something went wrong while trying to disconnect from Socket")}},r.componentDidMount=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.unSubscribeStore=w.subscribe((function(){return r.setState({allVacations:w.getState().allVacations})})),!H()){e.next=6;break}return e.next=5,r.getUserInfoFromServerCache();case 5:r.initiateSocket();case 6:r.checkIfGlobalStoraHasAllVacations();case 7:case"end":return e.stop()}}),e)}))),r.getAllVacationsFromServer=Object(m.a)(u.a.mark((function e(){var a,t,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("http://34.65.28.6:3001/vacations");case 3:a=e.sent,t=a.data,w.dispatch({type:n.GetAllVacations,payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);try{o=e.t0.response.data.error,r.vacationsErrorHandler(o)}catch(i){r.vacationsErrorHandler(e.t0)}case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),r.followVacation=function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(),t=document.getElementsByClassName("likeBtn"),n=Array.from(t),e.prev=3,r.disableButtonsGroup(n),o=a.vacationID,e.next=8,E.a.post("http://34.65.28.6:3001/vacations/follow_vacation/".concat(o));case 8:i={clickedVacationID:o,userName:r.userNameFromServerCache},r.socket.emit("increase-vacation-followers-count",i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3);try{c=e.t0.response.data.error,r.vacationsErrorHandler(c)}catch(s){r.vacationsErrorHandler(e.t0)}case 15:return e.prev=15,r.enableButtonsGroup(n),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(a){return e.apply(this,arguments)}}(),r.unfollowVacation=function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(),t=document.getElementsByClassName("likeBtn"),n=Array.from(t),e.prev=3,r.disableButtonsGroup(n),o=a.vacationID,e.next=8,E.a.post("http://34.65.28.6:3001/vacations/unfollow_vacation/".concat(o));case 8:i={clickedVacationID:o,userName:r.userNameFromServerCache},r.socket.emit("decrease-vacation-followers-count",i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3);try{c=e.t0.response.data.error,r.vacationsErrorHandler(c)}catch(s){r.vacationsErrorHandler(e.t0)}case 15:return e.prev=15,r.enableButtonsGroup(n),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(a){return e.apply(this,arguments)}}(),r.addVacation=function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n,o,i,c,s,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.getAllInputsArrForAddedVacation(),n=r.validateNewVacationData(t),o=Object(P.a)(n,2),i=o[0],c=o[1],!i){e.next=17;break}return U(),e.prev=4,e.next=7,E.a.post("http://34.65.28.6:3001/vacations/add_vacation",c);case 7:s=e.sent,l=s.data[0],r.socket.emit("add-vacation",l),r.hideModal(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),d=e.t0.response.data.error,r.vacationsErrorHandler(d);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(a){return e.apply(this,arguments)}}(),r.updateVacation=function(){var e=Object(m.a)(u.a.mark((function e(a,t){var n,o,i,c,s,l,d,m,p,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getAllInputsArrForUpdatedVacation(),o=r.validateNewVacationData(n),i=Object(P.a)(o,2),c=i[0],s=i[1],!c){e.next=20;break}return l=r.convertVacationDataForUIDisplay(n,a),U(),e.prev=5,d=a.vacationID,e.next=9,E.a.put("http://34.65.28.6:3001/vacations/update_vacation/".concat(d),{newVacationData:s,imageToDeleteFromServer:r.imageToDeleteFromServer});case 9:m=e.sent,p=m.data,l.imageURL=p,r.socket.emit("update-vacation-info",l),r.hideModal(t),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),v=e.t0.response.data.error,r.vacationsErrorHandler(v);case 20:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(a,t){return e.apply(this,arguments)}}(),r.deleteVacation=function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(),e.prev=1,t=r.imageToDeleteFromServer,e.next=5,E.a.post("http://34.65.28.6:3001/vacations/delete_vacation/".concat(a),{imageToDeleteFromServer:t});case 5:r.socket.emit("delete-vacation",a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0.response.data.error,r.vacationsErrorHandler(n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),r.getUserInfoFromServerCache=Object(m.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:a=e.sent,r.userTypeFromServerCache=a.userType,r.userNameFromServerCache=a.userName,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);try{t=e.t0.response.data.error,r.vacationsErrorHandler(t)}catch(n){r.vacationsErrorHandler(e.t0)}case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),r.checkIfGlobalStoraHasAllVacations=function(){var e=w.getState().allVacations;0===e.length?r.getAllVacationsFromServer():r.setState({allVacations:e})},r.registerAllSocketListeners=function(){r.socket.on("add-vacation",(function(e){r.addVacationViaSocketIO(e)})),r.socket.on("update-vacation-info",(function(e){r.updateVacationInfoViaSocketIO(e)})),r.socket.on("delete-vacation",(function(e){r.deleteVacationViaSocketIO(e)})),r.socket.on("increase-vacation-followers-count",(function(e){r.increaseVacationFollowersCountViaSocketIO(e)})),r.socket.on("decrease-vacation-followers-count",(function(e){r.decreaseVacationFollowersCountViaSocketIO(e)}))},r.convertVacationDataForUIDisplay=function(e,a){var t=a.vacationID,n=a.followersCount,o=e[0].value.trim(),i=e[1].value,c=e[2].value,s=e[3].valueAsNumber,l=e[4].value.trim(),d=e[5].value.trim();return{vacationID:t,vacationName:o,startDate:r.convertStartDateForUIDisplay(i),endDate:r.convertEndDateForUIDisplay(c),vacationPrice:s,vacationDescription:l,imageURL:d,followersCount:n}},r.convertStartDateForUIDisplay=function(e){return+e.split("-")[2]+"/"+ +e.split("-")[1]+"/"+ +e.split("-")[0]},r.convertEndDateForUIDisplay=function(e){return+e.split("-")[2]+"/"+ +e.split("-")[1]+"/"+ +e.split("-")[0]},r.getAllInputsArrForAddedVacation=function(){return[document.querySelector("#addedVacationName"),document.querySelector("#addStartDate"),document.querySelector("#addEndDate"),document.querySelector("#addedVacationPrice"),document.querySelector("#addedVacationDescription"),document.querySelector("#addedVacationImageURL")]},r.getAllInputsArrForUpdatedVacation=function(){return[document.querySelector("#editedVacationName"),document.querySelector("#editStartDate"),document.querySelector("#editEndDate"),document.querySelector("#editedVacationPrice"),document.querySelector("#editedVacationDescription"),document.querySelector("#editedVacationImageURL")]},r.onVacationFollowAttempt=function(e){H()?r.validateVacationIsNotLikedByTheUser(e)?r.followVacation(e):r.unfollowVacation(e):r.props.history.push("/login")},r.validateVacationIsNotLikedByTheUser=function(e){var a=w.getState().favoriteVacations,t=e.vacationID;return void 0===a.find((function(e){return e.vacationID===t}))},r.getIndexOfVacationByID=function(e){var a=w.getState().allVacations,t=a.find((function(a){return a.vacationID===e}));return a.indexOf(t)},r.getIndexOfFavoriteVacationByID=function(e){var a=w.getState().favoriteVacations,t=a.find((function(a){return a.vacationID===e}));return a.indexOf(t)},r.onVacationAdditionAttempt=function(){H()?r.displayAdditionModal():r.props.history.push("/login")},r.onVacationEditAttempt=function(e,a){if(H()){var t=a.target;r.disableButton(t),r.displayEditModal(e),r.enableButton(t)}else r.props.history.push("/login")},r.onVacationDeleteAttempt=function(e,a){if(H()){var t=a.target;r.disableButton(t),r.displayDeletionModal(e),r.enableButton(t)}else r.props.history.push("/login")},r.validateNewVacationData=function(e){var a=e[0].value.trim(),t=e[1].value,n=e[2].value,o=e[3].valueAsNumber,i=e[4].value.trim(),c=e[5].value.trim(),s=r.validateNewVacationURL(c),l=r.validateNewDescription(i),d=r.validateNewPrice(o),u=r.validateNewDates(t,n);if(r.validateNewName(a)&&(d&&l&&u&&s))return[!0,{vacationName:a,vacationPrice:o,vacationDescription:i,startDate:t,endDate:n,imageURL:c}];return[!1,{}]},r.validateNewName=function(e){return""!==e&&e.length>=3&&e.length<=44||(r.vacationsErrorHandler("The new name must be between 3 - 44 characters long"),!1)},r.validateNewPrice=function(e){return e>0&&e<1e5||(r.vacationsErrorHandler("The new price must be larger than 0 and Lower than 100,000"),!1)},r.validateNewDescription=function(e){return""!==e&&e.length>=5&&e.length<=249||(r.vacationsErrorHandler("The new description must be between 5 - 249 characters long"),!1)},r.validateNewDates=function(e,a){if(""!==e&&void 0!==e&&""!==a&&void 0!==a){var t=(new Date).setHours(0,0,0,0),n=new Date(e).setHours(0,0,0,0),o=new Date(a).setHours(0,0,0,0);return n>=t?o>n||(r.vacationsErrorHandler("The return date must be later than the starting date"),!1):(r.vacationsErrorHandler("The starting date must be later than today"),!1)}return r.vacationsErrorHandler("Vacation Dates Not Valid, Try Again"),!1},r.validateNewVacationURL=function(e){return""!==e&&e.length>=10&&e.length<=998||(r.vacationsErrorHandler("Image URL must be between 10 - 998 characters long"),!1)},r.addVacationViaSocketIO=function(e){w.dispatch({type:n.AddVacation,payload:e})},r.updateVacationInfoViaSocketIO=function(e){var a=e.vacationID,t=r.getIndexOfFavoriteVacationByID(a),o=r.getIndexOfVacationByID(a);w.dispatch({type:n.UpdateVacation,payload:{indexOfClickedVacationInGlobalStore:o,convertedValidDataForUIDisplay:e}}),-1!==t&&w.dispatch({type:n.UpdateFavoriteVacation,payload:{indexOfClickedFavoriteVacationInGlobalStore:t,convertedValidDataForUIDisplay:e}})},r.deleteVacationViaSocketIO=function(e){var a=r.getIndexOfFavoriteVacationByID(e),t=r.getIndexOfVacationByID(e);w.dispatch({type:n.DeleteVacationViaSocketIO,payload:t}),-1!==a&&w.dispatch({type:n.DeleteFavoriteVacationViaSocketIO,payload:a})},r.increaseVacationFollowersCountViaSocketIO=function(e){var a=r.getIndexOfVacationByID(e.clickedVacationID),t=r.getIndexOfFavoriteVacationByID(e.clickedVacationID),o=w.getState().allVacations[a].followersCount+1;-1!==t&&w.dispatch({type:n.IncreaseFavoriteVacationFollowersCount,payload:{indexOfFavoriteClickedVacationInGlobalStore:t,newFollowersCount:o}}),w.dispatch({type:n.IncreaseVacationFollowersCount,payload:{indexOfClickedVacationInGlobalStore:a,newFollowersCount:o}}),r.checkIfUserShouldIncreaseFollowersCountInUI(e)},r.decreaseVacationFollowersCountViaSocketIO=function(e){var a=r.getIndexOfVacationByID(e.clickedVacationID),t=r.getIndexOfFavoriteVacationByID(e.clickedVacationID),o=w.getState().allVacations[a].followersCount-1;-1!==t&&w.dispatch({type:n.DecreaseFavoriteVacationFollowersCount,payload:{indexOfFavoriteClickedVacationInGlobalStore:t,newFollowersCount:o}}),w.dispatch({type:n.DecreaseVacationFollowersCount,payload:{indexOfClickedVacationInGlobalStore:a,newFollowersCount:o}}),r.checkIfUserShouldDecreaseFollowersCountInUI(e)},r.checkIfUserShouldIncreaseFollowersCountInUI=function(e){var a=e.clickedVacationID,t=r.getIndexOfVacationByID(a),o=w.getState().allVacations[t];r.userNameFromServerCache===e.userName&&w.dispatch({type:n.SetFollowedVacation,payload:o})},r.checkIfUserShouldDecreaseFollowersCountInUI=function(e){var a=e.clickedVacationID,t=r.getIndexOfFavoriteVacationByID(a);r.userNameFromServerCache===e.userName&&w.dispatch({type:n.UnfollowVacation,payload:t})},r.initiateSocket=function(){var e=JSON.parse(sessionStorage.getItem("userInfo")).token;r.socket=ae()("http://34.65.28.6:3002",{query:"userToken="+e}),r.registerAllSocketListeners()},r.disableButton=function(e){e.disabled=!0,e.style.cursor="not-allowed"},r.enableButton=function(e){e.disabled=!1,e.style.cursor="pointer"},r.disableButtonsGroup=function(e){var a,t=Object(T.a)(e);try{for(t.s();!(a=t.n()).done;){var n=a.value;r.disableButton(n)}}catch(o){t.e(o)}finally{t.f()}},r.enableButtonsGroup=function(e){var a,t=Object(T.a)(e);try{for(t.s();!(a=t.n()).done;){var n=a.value;r.enableButton(n)}}catch(o){t.e(o)}finally{t.f()}},r.vacationsErrorHandler=function(e){var a=document.querySelector("#snackbar");a.className="show",a.textContent=e,setTimeout((function(){a.className=a.className.replace("show","")}),6e3)},r.displayVacationNameInEditModal=function(e){document.querySelector("#editedVacationName").value=e},r.displayVacationPriceInEditModal=function(e){document.querySelector("#editedVacationPrice").valueAsNumber=e},r.displayVacationDatesInEditModal=function(e,a){var t=document.querySelector("#editStartDate"),n=document.querySelector("#editEndDate"),r=+e.split("/")[2]+"-"+ +e.split("/")[1]+"-"+ +e.split("/")[0],o=+a.split("/")[2]+"-"+ +a.split("/")[1]+"-"+ +a.split("/")[0];t.valueAsDate=new Date(r),n.valueAsDate=new Date(o)},r.displayVacationDescriptionInEditModal=function(e){document.querySelector("#editedVacationDescription").value=e},r.displayVacationImageInEditModal=function(e){document.querySelector("#editedVacationImageURL").value=e},r.displayAdditionModal=function(){var e=document.querySelector("#addModalContainer"),a=document.querySelector("#addModalDoneBtn"),t=document.querySelector("#addModalCancelBtn");e.style.display="block",t.onclick=function(){r.hideModal(e)},a.onclick=function(){r.addVacation(e)},window.addEventListener("click",(function(a){a.target===e&&r.hideModal(e)}))},r.displayEditModal=function(e){var a=document.querySelector("#editModalContainer"),t=document.querySelector("#editModalIcon"),n=document.querySelector("#editModalHeader"),o=document.querySelector("#editModalDoneBtn"),i=document.querySelector("#editModalCancelBtn");r.displayVacationNameInEditModal(e.vacationName),r.displayVacationPriceInEditModal(e.vacationPrice),r.displayVacationDescriptionInEditModal(e.vacationDescription),r.displayVacationDatesInEditModal(e.startDate,e.endDate),r.displayVacationImageInEditModal(e.imageURL),r.imageToDeleteFromServer=e.imageURL,a.style.display="block",n.textContent="Update ".concat(e.vacationName),t.src=e.imageURL,i.onclick=function(){r.hideModal(a)},o.onclick=function(){r.updateVacation(e,a)},window.onclick=function(e){e.target===a&&(a.style.display="none")}},r.displayDeletionModal=function(e){var a=e.vacationID,t=document.querySelector("#deletionModalContainer"),n=document.querySelector("#deletionModalHeader"),o=document.querySelector("#deletionModalText"),i=document.querySelector("#deleteBtn"),c=document.querySelector("#dontDeleteBtn"),s=document.querySelector("#deletionModalVacationName");t.style.display="block",n.textContent="Confirm Your Deletion",o.textContent="Are You Sure You Would Like To Delete",s.textContent="".concat(e.vacationName," ?"),r.imageToDeleteFromServer=e.imageURL,c.onclick=function(){r.hideModal(t)},i.onclick=function(){r.deleteVacation(a),r.hideModal(t)},window.onclick=function(e){e.target===t&&(t.style.display="none")}},r.clearModalInputs=function(){var e=document.querySelector("#addedVacationName"),a=document.querySelector("#addStartDate"),t=document.querySelector("#addEndDate"),n=document.querySelector("#addedVacationPrice"),r=document.querySelector("#addedVacationDescription"),o=document.querySelector("#addedVacationImageURL");e.value="",a.value="",t.value="",n.valueAsNumber=0,r.value="",o.value=""},r.hideModal=function(e){e.style.display="none",r.clearModalInputs()},r.state={allVacations:new Array},r}return Object(v.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"allVacationsSection",id:"allVacationsSection"},"ADMIN"===this.userTypeFromServerCache&&o.a.createElement("div",{className:"topNavbarSection"},o.a.createElement("span",{id:"adminText"},"Logged as an Admin"),o.a.createElement("span",{id:"reportsNavItem",className:"topNavItem reportsNavItem"},o.a.createElement(s.b,{to:"/reports"},"View Reports Page"))),o.a.createElement("div",{className:"headerContainer"},"ADMIN"===this.userTypeFromServerCache?o.a.createElement("h2",{className:"allVacationsHeader sharp-text"},"All ",this.state.allVacations.length," Vacations You Can Edit"):o.a.createElement("h2",{className:"allVacationsHeader sharp-text"},"All ",this.state.allVacations.length," Vacations We've Got For You")),o.a.createElement("div",{className:"allVacations"},"ADMIN"===this.userTypeFromServerCache&&o.a.createElement("div",{className:"addVacationSquare",onClick:this.onVacationAdditionAttempt},o.a.createElement("div",{className:"newVacationText"},o.a.createElement("h2",{className:"sharp-text"},"New Vacation"))),this.state.allVacations.length>0?this.state.allVacations.map((function(a,t){return o.a.createElement(X,{key:t,vacation:a,onVacationFollowAttempt:e.onVacationFollowAttempt,validateVacationIsNotLikedByTheUser:e.validateVacationIsNotLikedByTheUser,onVacationDeleteAttempt:e.onVacationDeleteAttempt,onVacationEditAttempt:e.onVacationEditAttempt,userTypeFromServerCache:e.userTypeFromServerCache,disableBtn:e.disableButton,enableBtn:e.enableButton})})):o.a.createElement("div",{className:"noVcationsSection"},o.a.createElement("img",{className:"settingsImage",src:G.a,alt:""}),o.a.createElement("h1",{className:"sharp-text"},"Oops, We Could Not Find Any Vacations")))),o.a.createElement("div",{id:"deletionModalContainer"},o.a.createElement("div",{id:"deletionModal"},o.a.createElement("h1",{id:"deletionModalHeader"},"."),o.a.createElement("p",{id:"deletionModalText"}),o.a.createElement("h2",{id:"deletionModalVacationName"},"."),o.a.createElement("img",{id:"deleteModalIcon",src:W.a,alt:"Delete Vacation Modal"}),o.a.createElement("div",{className:"buttonsSection"},o.a.createElement("button",{id:"dontDeleteBtn"},"Don't Delete"),o.a.createElement("button",{id:"deleteBtn"},"Delete")))),o.a.createElement("div",{id:"editModalContainer"},o.a.createElement("div",{id:"editModal"},o.a.createElement("h1",{id:"editModalHeader"},"."),o.a.createElement("img",{id:"editModalIcon",alt:"Add New Vacation Modal"}),o.a.createElement("div",{id:"editInputs"},o.a.createElement(Z.a,{id:"editedVacationName",label:"Name",variant:"standard"}),o.a.createElement("div",{id:"editDatesSection"},o.a.createElement("input",{type:"date",min:(new Date).toISOString().slice(0,10),max:"2999-01-01",id:"editStartDate"}),o.a.createElement("span",null,"-"),o.a.createElement("input",{type:"date",min:(new Date).toISOString().slice(0,10),max:"2999-01-01",id:"editEndDate"})),o.a.createElement(Z.a,{id:"editedVacationPrice",type:"number",label:"Price",variant:"standard"}),o.a.createElement(Z.a,{id:"editedVacationDescription",label:"Description"}),o.a.createElement(Z.a,{id:"editedVacationImageURL",label:"Image URL"}),o.a.createElement("p",null,"The Image You Upload Will Be Saved!")),o.a.createElement("div",{className:"buttonsSection"},o.a.createElement("button",{id:"editModalCancelBtn"},"Cancel"),o.a.createElement("button",{id:"editModalDoneBtn"},"Update")))),o.a.createElement("div",{id:"addModalContainer"},o.a.createElement("div",{id:"addModal"},o.a.createElement("h1",{id:"addModalHeader"},"Add a New Vacation !"),o.a.createElement("img",{id:"addModalIcon",src:Y.a,alt:"Vacation URL Is Broken"}),o.a.createElement("div",{id:"addInputs"},o.a.createElement(Z.a,{id:"addedVacationName",label:"Name",variant:"standard"}),o.a.createElement("div",{id:"addDatesSection"},o.a.createElement("input",{type:"date",min:(new Date).toISOString().slice(0,10),max:"2999-01-01",id:"addStartDate"}),o.a.createElement("span",null,"-"),o.a.createElement("input",{type:"date",min:(new Date).toISOString().slice(0,10),max:"2999-01-01",id:"addEndDate"})),o.a.createElement(Z.a,{id:"addedVacationPrice",type:"number",label:"Price",variant:"standard"}),o.a.createElement(Z.a,{id:"addedVacationDescription",label:"Description"}),o.a.createElement(Z.a,{id:"addedVacationImageURL",label:"Image URL"}),o.a.createElement("p",null,"The Image You Upload Will Be Saved!")),o.a.createElement("div",{className:"buttonsSection"},o.a.createElement("button",{id:"addModalCancelBtn"},"Cancel"),o.a.createElement("button",{id:"addModalDoneBtn"},"Add")))),o.a.createElement("div",{id:"snackbar"}))}}]),t}(r.Component)),ne=Object(l.h)(te);function re(e){return o.a.createElement("div",{className:"vacationCardContainer"},o.a.createElement("div",{className:"topSection"},o.a.createElement("div",{className:"imgSection"},o.a.createElement("img",{className:"vacationCardImg",src:e.vacation.imageURL,alt:e.vacation.vacationDescription})),o.a.createElement("div",{className:"vacationInfoCard"},o.a.createElement("h4",{className:"resortName"},e.vacation.vacationName),o.a.createElement("div",{className:"vacationDates"},o.a.createElement("h4",{className:"vacationDate"},e.vacation.startDate),o.a.createElement("span",null," - "),o.a.createElement("h4",{className:"vacationDate"},e.vacation.endDate)),o.a.createElement("h4",{className:"vacationPrice"},e.vacation.vacationPrice," $")),o.a.createElement("div",{className:"vacationDesc"},e.vacation.vacationDescription)),o.a.createElement("div",{className:"bottomSection"},o.a.createElement("div",{className:"vacationLikeCardSection"},o.a.createElement("button",{className:"fullHeart likeBtn",onClick:function(){e.OnUserDislikeClick(e.vacation)}})),o.a.createElement("p",{className:"followersText"},e.vacation.followersCount)))}var oe=function(){var e=JSON.parse(sessionStorage.getItem("userInfo"));if(null!==e&&void 0!==e.userType)return e.userType},ie=(t(299),function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=a.call(this,e)).unSubscribeStore=void 0,r.userNameFromServerCache=void 0,r.socket=void 0,r.componentWillUnmount=function(){r.unSubscribeStore();try{r.socket.disconnect()}catch(e){}},r.componentDidMount=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(),!H()){e.next=8;break}return e.next=5,A();case 5:a=e.sent,r.userNameFromServerCache=a.userName,r.initiateSocket();case 8:r.unSubscribeStore=w.subscribe((function(){return r.setState({favoriteVacations:w.getState().favoriteVacations})})),r.checkIfGlobalStoreHasFavoriteVacations();case 10:case"end":return e.stop()}}),e)}))),r.getFavoriteVacationsFromServer=Object(m.a)(u.a.mark((function e(){var a,t,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("USER"!==oe()){e.next=13;break}return e.prev=2,e.next=5,E.a.get("http://34.65.28.6:3001/vacations/favorite_vacations");case 5:a=e.sent,t=a.data,w.dispatch({type:n.GetFavoriteVacations,payload:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2);try{o=e.t0.response.data.error,r.favoriteVacationsErrorHandler(o)}catch(i){r.favoriteVacationsErrorHandler(e.t0)}case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),r.removeClickedVacationFromFavorites=function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H()){e.next=22;break}return U(),t=document.getElementsByClassName("likeBtn"),n=Array.from(t),e.prev=5,r.disableButtonsGroup(n),e.next=9,E.a.post("http://34.65.28.6:3001/vacations/unfollow_vacation/".concat(a));case 9:o={clickedVacationID:a,userName:r.userNameFromServerCache},r.socket.emit("decrease-vacation-followers-count",o),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),i=e.t0.response.data.error,r.favoriteVacationsErrorHandler(i);case 17:return e.prev=17,r.enableButtonsGroup(n),e.finish(17);case 20:e.next=23;break;case 22:r.props.history.push("/login");case 23:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(a){return e.apply(this,arguments)}}(),r.OnUserDislikeClick=function(e){var a=e.vacationID;r.removeClickedVacationFromFavorites(a)},r.checkIfGlobalStoreHasFavoriteVacations=function(){var e=w.getState().favoriteVacations;0===e.length?r.getFavoriteVacationsFromServer():r.setState({favoriteVacations:e})},r.initiateSocket=function(){var e=JSON.parse(sessionStorage.getItem("userInfo")).token;r.socket=ae()("http://34.65.28.6:3002",{query:"userToken="+e})},r.disableButton=function(e){e.disabled=!0,e.style.cursor="not-allowed"},r.enableButton=function(e){e.disabled=!1,e.style.cursor="pointer"},r.disableButtonsGroup=function(e){var a,t=Object(T.a)(e);try{for(t.s();!(a=t.n()).done;){var n=a.value;r.disableButton(n)}}catch(o){t.e(o)}finally{t.f()}},r.enableButtonsGroup=function(e){var a,t=Object(T.a)(e);try{for(t.s();!(a=t.n()).done;){var n=a.value;r.enableButton(n)}}catch(o){t.e(o)}finally{t.f()}},r.favoriteVacationsErrorHandler=function(e){var a=document.querySelector("#snackbar");a.className="show",a.textContent=e,setTimeout((function(){a.className=a.className.replace("show","")}),3e3)},r.state={favoriteVacations:new Array},r}return Object(v.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.favoriteVacations.length>0&&o.a.createElement("div",{className:"favoriteVacationsSection"},o.a.createElement("div",{className:"headerContainer"},o.a.createElement("h2",{className:"sharp-text favoritesHeader"},"Your Favorite Vacations")),o.a.createElement("div",{className:"favoriteVacations"},this.state.favoriteVacations.map((function(a,t){return o.a.createElement(re,{key:t,vacation:a,OnUserDislikeClick:e.OnUserDislikeClick})})))),o.a.createElement("div",{id:"snackbar"}))}}]),t}(r.Component)),ce=Object(l.h)(ie);t(300);function se(){return o.a.createElement("div",{className:"logoContainer"},o.a.createElement("img",{className:"logo",src:t(301),alt:"logo"}))}function le(){return o.a.createElement("div",{className:"vacationsAndNavbar"},o.a.createElement("div",{className:"topNavbarSection"},o.a.createElement(se,null),o.a.createElement(q,null)),o.a.createElement("div",{className:"allVacationsSectionsContainer"},o.a.createElement(ce,null),o.a.createElement(ne,null)))}t(302);function de(){return o.a.createElement("div",{className:"layout",id:"topPage"},o.a.createElement(s.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/login",component:D,exact:!0}),o.a.createElement(l.b,{path:"/register",component:x,exact:!0}),o.a.createElement(l.b,{path:"/vacations",component:le,exact:!0}),o.a.createElement(l.b,{path:"/reports",component:L,exact:!0}),o.a.createElement(l.a,{from:"/",to:"/login",exact:!0}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,a,t){e.exports=t.p+"static/media/astronautSVG.a83ce8a9.svg"},84:function(e,a,t){e.exports=t.p+"static/media/noAuthorizationSVG.ae39de01.svg"}},[[143,1,2]]]);
//# sourceMappingURL=main.6940a4b9.chunk.js.map