{"ast":null,"code":"import { insertUserTypeToModelAfterLogin } from './UserTypeFromServer';\nimport axios from 'axios';\n/*\r\n    Explanation -> This Model is called whenever a successful login has happaned\r\n    (Automatically after a successful registration / after a regular login).\r\n\r\n    This Model is designated to prevent duplication of code from all components that needs to make this proccess.\r\n*/\n// ---------- Attaching the user's token to the interceptor ---------- //\n\nconst attachTokenToInterceptor = token => {\n  let brearerToken = \"Bearer \" + token;\n  axios.defaults.headers.common['Authorization'] = brearerToken;\n};\n\nexport const successfulLoginHandler = loginServerResponse => {\n  // Attaching the Token we received from the server, to every HTTP request we'll send from now on.\n  // This is our 'Interceptor'.\n  attachTokenToInterceptor(loginServerResponse.token); // Inserting the user's type to a Model, that determines whether to display the user the Admin's control panel.\n  // It does not mean he will be able the use the control panel. The real validation happens on the server.\n\n  insertUserTypeToModelAfterLogin(loginServerResponse.userType); // ---------- Inserting the user's info to the sessionStorage ---------- //\n\n  let strUserInfo = JSON.stringify(loginServerResponse);\n  sessionStorage.setItem('userInfo', strUserInfo);\n};","map":{"version":3,"sources":["C:/Users/Ben/Desktop/John Bryce/פרוייקטים/project3 - Vacations/client/src/models/SuccessfulLoginHandler.ts"],"names":["insertUserTypeToModelAfterLogin","axios","attachTokenToInterceptor","token","brearerToken","defaults","headers","common","successfulLoginHandler","loginServerResponse","userType","strUserInfo","JSON","stringify","sessionStorage","setItem"],"mappings":"AACA,SAASA,+BAAT,QAAgD,sBAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA;;;;;;AAQA;;AAEA,MAAMC,wBAAwB,GAAIC,KAAD,IAAmB;AAEhD,MAAIC,YAAY,GAAG,YAAYD,KAA/B;AACAF,EAAAA,KAAK,CAACI,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDH,YAAjD;AACH,CAJD;;AAOA,OAAO,MAAMI,sBAAsB,GAAIC,mBAAD,IAAyD;AAE3F;AACA;AACAP,EAAAA,wBAAwB,CAACO,mBAAmB,CAACN,KAArB,CAAxB,CAJ2F,CAO3F;AACA;;AACAH,EAAAA,+BAA+B,CAACS,mBAAmB,CAACC,QAArB,CAA/B,CAT2F,CAY3F;;AAEA,MAAIC,WAAW,GAAGC,IAAI,CAACC,SAAL,CAAeJ,mBAAf,CAAlB;AACAK,EAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCJ,WAAnC;AACH,CAhBM","sourcesContent":["import SuccessfulLoginServerResponse from './SuccessfulLoginServerResponse';\r\nimport { insertUserTypeToModelAfterLogin } from './UserTypeFromServer';\r\nimport axios from 'axios';\r\n\r\n/*\r\n    Explanation -> This Model is called whenever a successful login has happaned\r\n    (Automatically after a successful registration / after a regular login).\r\n\r\n    This Model is designated to prevent duplication of code from all components that needs to make this proccess.\r\n*/\r\n\r\n\r\n// ---------- Attaching the user's token to the interceptor ---------- //\r\n\r\nconst attachTokenToInterceptor = (token: string) => {\r\n\r\n    let brearerToken = \"Bearer \" + token;\r\n    axios.defaults.headers.common['Authorization'] = brearerToken;\r\n}\r\n\r\n\r\nexport const successfulLoginHandler = (loginServerResponse : SuccessfulLoginServerResponse) => {\r\n\r\n    // Attaching the Token we received from the server, to every HTTP request we'll send from now on.\r\n    // This is our 'Interceptor'.\r\n    attachTokenToInterceptor(loginServerResponse.token);\r\n\r\n\r\n    // Inserting the user's type to a Model, that determines whether to display the user the Admin's control panel.\r\n    // It does not mean he will be able the use the control panel. The real validation happens on the server.\r\n    insertUserTypeToModelAfterLogin(loginServerResponse.userType);\r\n\r\n    \r\n    // ---------- Inserting the user's info to the sessionStorage ---------- //\r\n\r\n    let strUserInfo = JSON.stringify(loginServerResponse);\r\n    sessionStorage.setItem('userInfo', strUserInfo);\r\n}"]},"metadata":{},"sourceType":"module"}