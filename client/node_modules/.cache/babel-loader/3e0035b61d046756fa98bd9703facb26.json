{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Ben\\\\Desktop\\\\John Bryce\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05D9\\u05E7\\u05D8\\u05D9\\u05DD\\\\project3 - Vacations\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Ben\\\\Desktop\\\\John Bryce\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05D9\\u05E7\\u05D8\\u05D9\\u05DD\\\\project3 - Vacations\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from'react';import{useHistory}from\"react-router-dom\";import{isUserLoggedValidator}from'../../models/IsUserLoggedValidator';import{store}from'../../Redux/Store';import{ActionType}from'../../Redux/ActionType';import axios from'axios';import'./topNavbar.css';// ------------------------------------------------- This Component Displays The Top Navigation Bar ------------------------------------------------- //\nexport default function TopNavbar(){var history=useHistory();// ------------------------------------------------- Controller ------------------------------------------------- //\n// Handles The User's Request To Logout And Login\nvar onUserLoginStautsChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var isUserLogged;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isUserLogged=isUserLoggedValidator();if(!isUserLogged){_context.next=12;break;}_context.prev=2;_context.next=5;return axios.post(\"http://34.65.28.6:3001/users/logout\");case 5:_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);case 9:_context.prev=9;// Clearing the user's favorite vacations from the Global Store\nstore.dispatch({type:ActionType.OnUserLogout});return _context.finish(9);case 12:sessionStorage.clear();history.push(\"/login\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,7,9,12]]);}));return function onUserLoginStautsChange(){return _ref.apply(this,arguments);};}();// ------------------------------------------------- View ------------------------------------------------- //\n// When the user scrolls down, change the navigation bar\nwindow.onscroll=function(){try{var topNavBar=document.querySelector(\"#topNavbar\");var logStatusBtn=document.querySelector(\"#logStatusBtn\");if(document.body.scrollTop>130||document.documentElement.scrollTop>130){topNavBar.style.backgroundColor=\"#174d5f\";topNavBar.style.color=\"white\";logStatusBtn.style.color='white';}else if(document.body.scrollTop<=130||document.documentElement.scrollTop<=130){topNavBar.style.backgroundColor=\"transparent\";topNavBar.style.color=\"#15304c\";logStatusBtn.style.color='blue';}}catch(_unused2){}};return/*#__PURE__*/React.createElement(\"div\",{id:\"topNavbar\",className:\"topNavbar\"},isUserLoggedValidator()?/*#__PURE__*/React.createElement(\"div\",{className:\"helloUserSection\"},// Displaying The Username In The Navigation Bar\nJSON.parse(sessionStorage.getItem(\"userInfo\")).userName,/*#__PURE__*/React.createElement(\"span\",{id:\"logStatusBtn\",onClick:onUserLoginStautsChange,className:\"topNavItem loginStatusButton\"},\"Logout\")):/*#__PURE__*/React.createElement(\"div\",{className:\"helloUserSection\"},/*#__PURE__*/React.createElement(\"span\",{id:\"loginStatusBtn\",onClick:onUserLoginStautsChange,className:\"topNavItem loginStatusButton\"},\"Login\")));}","map":{"version":3,"sources":["C:/Users/Ben/Desktop/John Bryce/פרוייקטים/project3 - Vacations/client/src/components/topNavbar/TopNavbar.tsx"],"names":["React","useHistory","isUserLoggedValidator","store","ActionType","axios","TopNavbar","history","onUserLoginStautsChange","isUserLogged","post","dispatch","type","OnUserLogout","sessionStorage","clear","push","window","onscroll","topNavBar","document","querySelector","logStatusBtn","body","scrollTop","documentElement","style","backgroundColor","color","JSON","parse","getItem","userName"],"mappings":"ueAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,qBAAT,KAAsC,oCAAtC,CACA,OAASC,KAAT,KAAsB,mBAAtB,CACA,OAASC,UAAT,KAA2B,wBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,iBAAP,CAGA;AAEA,cAAe,SAASC,CAAAA,SAAT,EAAqB,CAEhC,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CAIA;AAEA;AACA,GAAMO,CAAAA,uBAAuB,0FAAG,oJAExBC,YAFwB,CAETP,qBAAqB,EAFZ,KAIxBO,YAJwB,gEAQdJ,CAAAA,KAAK,CAACK,IAAN,uCARc,6GAYpB;AACAP,KAAK,CAACQ,QAAN,CAAe,CACXC,IAAI,CAAER,UAAU,CAACS,YADN,CAAf,EAboB,kCAmB5BC,cAAc,CAACC,KAAf,GACAR,OAAO,CAACS,IAAR,CAAa,QAAb,EApB4B,yEAAH,kBAAvBR,CAAAA,uBAAuB,0CAA7B,CAyBA;AAEA;AACAS,MAAM,CAACC,QAAP,CAAkB,UAAM,CACpB,GAAI,CACA,GAAMC,CAAAA,SAAS,CAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB,CACA,GAAMC,CAAAA,YAAY,CAAGF,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB,CAEA,GAAID,QAAQ,CAACG,IAAT,CAAcC,SAAd,CAA0B,GAA1B,EAAiCJ,QAAQ,CAACK,eAAT,CAAyBD,SAAzB,CAAqC,GAA1E,CAA+E,CAC3EL,SAAS,CAACO,KAAV,CAAgBC,eAAhB,CAAkC,SAAlC,CACAR,SAAS,CAACO,KAAV,CAAgBE,KAAhB,CAAwB,OAAxB,CACAN,YAAY,CAACI,KAAb,CAAmBE,KAAnB,CAA2B,OAA3B,CACH,CAJD,IAMK,IAAIR,QAAQ,CAACG,IAAT,CAAcC,SAAd,EAA2B,GAA3B,EAAkCJ,QAAQ,CAACK,eAAT,CAAyBD,SAAzB,EAAsC,GAA5E,CAAiF,CAClFL,SAAS,CAACO,KAAV,CAAgBC,eAAhB,CAAkC,aAAlC,CACAR,SAAS,CAACO,KAAV,CAAgBE,KAAhB,CAAwB,SAAxB,CACAN,YAAY,CAACI,KAAb,CAAmBE,KAAnB,CAA2B,MAA3B,CACH,CACJ,CACD,eAAM,CAAE,CACX,CAlBD,CAqBA,mBACI,2BAAK,EAAE,CAAC,WAAR,CAAoB,SAAS,CAAC,WAA9B,EAEK1B,qBAAqB,gBAClB,2BAAK,SAAS,CAAC,kBAAf,EAEQ;AACA2B,IAAI,CAACC,KAAL,CAAWhB,cAAc,CAACiB,OAAf,CAAuB,UAAvB,CAAX,EAA+CC,QAHvD,cAMI,4BAAM,EAAE,CAAC,cAAT,CAAwB,OAAO,CAAExB,uBAAjC,CAA0D,SAAS,CAAC,8BAApE,WANJ,CADkB,cAYlB,2BAAK,SAAS,CAAC,kBAAf,eACI,4BAAM,EAAE,CAAC,gBAAT,CAA0B,OAAO,CAAEA,uBAAnC,CAA4D,SAAS,CAAC,8BAAtE,UADJ,CAdR,CADJ,CAwBH","sourcesContent":["import React from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { isUserLoggedValidator } from '../../models/IsUserLoggedValidator';\r\nimport { store } from '../../Redux/Store';\r\nimport { ActionType } from '../../Redux/ActionType';\r\nimport axios from 'axios';\r\nimport './topNavbar.css';\r\n\r\n\r\n// ------------------------------------------------- This Component Displays The Top Navigation Bar ------------------------------------------------- //\r\n\r\nexport default function TopNavbar() {\r\n\r\n    const history = useHistory();\r\n\r\n\r\n\r\n    // ------------------------------------------------- Controller ------------------------------------------------- //\r\n\r\n    // Handles The User's Request To Logout And Login\r\n    const onUserLoginStautsChange = async () => {\r\n        \r\n        let isUserLogged = isUserLoggedValidator() ;\r\n\r\n        if (isUserLogged) {\r\n            \r\n            // Sending a 'logout' request, in order to delete the user from the server's cache\r\n            try {\r\n                await axios.post(`http://34.65.28.6:3001/users/logout`);\r\n            }\r\n            catch {}\r\n            finally {\r\n                // Clearing the user's favorite vacations from the Global Store\r\n                store.dispatch({\r\n                    type: ActionType.OnUserLogout\r\n                });\r\n            }\r\n        }\r\n        \r\n        sessionStorage.clear();\r\n        history.push(\"/login\");\r\n    }\r\n\r\n\r\n\r\n    // ------------------------------------------------- View ------------------------------------------------- //\r\n    \r\n    // When the user scrolls down, change the navigation bar\r\n    window.onscroll = () => {\r\n        try {\r\n            const topNavBar = document.querySelector(\"#topNavbar\") as HTMLElement;\r\n            const logStatusBtn = document.querySelector(\"#logStatusBtn\") as HTMLElement;\r\n\r\n            if (document.body.scrollTop > 130 || document.documentElement.scrollTop > 130) {\r\n                topNavBar.style.backgroundColor = \"#174d5f\";\r\n                topNavBar.style.color = \"white\";\r\n                logStatusBtn.style.color = 'white';\r\n            }\r\n    \r\n            else if (document.body.scrollTop <= 130 || document.documentElement.scrollTop <= 130) {\r\n                topNavBar.style.backgroundColor = \"transparent\";\r\n                topNavBar.style.color = \"#15304c\";\r\n                logStatusBtn.style.color = 'blue';\r\n            }\r\n        }\r\n        catch {}\r\n    };\r\n\r\n\r\n    return (\r\n        <div id=\"topNavbar\" className=\"topNavbar\">\r\n\r\n            {isUserLoggedValidator() ? \r\n                <div className=\"helloUserSection\">\r\n                    {\r\n                        // Displaying The Username In The Navigation Bar\r\n                        JSON.parse(sessionStorage.getItem(\"userInfo\")).userName\r\n                    }\r\n\r\n                    <span id=\"logStatusBtn\" onClick={onUserLoginStautsChange} className=\"topNavItem loginStatusButton\">\r\n                            Logout\r\n                        </span>\r\n                </div>\r\n                :\r\n                <div className=\"helloUserSection\">\r\n                    <span id=\"loginStatusBtn\" onClick={onUserLoginStautsChange} className=\"topNavItem loginStatusButton\">\r\n                        Login\r\n                    </span>\r\n                </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}